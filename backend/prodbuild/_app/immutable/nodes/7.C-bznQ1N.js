import{f as O,a as y,s as p}from"../chunks/CwDV2ZAI.js";import{i as It}from"../chunks/_8TqtyVi.js";import{W as Dt,a3 as S,a4 as Ht,Y as C,Z as Yt,_ as s,$ as e,t as x,o as a,V as w,B as k,a0 as t,a7 as Kt}from"../chunks/ZqAPZRbL.js";import{e as h,i as M}from"../chunks/C7JNzSMk.js";import{s as m,g as Vt}from"../chunks/DqRx0sPc.js";import{s as Wt,a as Gt}from"../chunks/Dmjw4m20.js";var qt=O('<div><div class="sensor-label svelte-tc5t5g"> </div> <div> </div></div>'),Qt=O('<div class="flag-indicator-row svelte-tc5t5g"><div><div class="status-ring svelte-tc5t5g"></div> <div class="status-core svelte-tc5t5g"></div></div> <div class="flag-info svelte-tc5t5g"><div class="flag-name svelte-tc5t5g"> </div> <div> </div></div></div>'),Zt=O('<div class="flag-indicator-row svelte-tc5t5g"><div><div class="status-ring svelte-tc5t5g"></div> <div class="status-core svelte-tc5t5g"></div></div> <div class="flag-info svelte-tc5t5g"><div class="flag-name svelte-tc5t5g"> </div> <div> </div></div></div>'),zt=O('<div class="compact-sensor-card bg-gray-800/50 border-gray-700/50 backdrop-blur-sm svelte-tc5t5g"><div class="sensor-label svelte-tc5t5g"></div> <div class="sensor-value text-emerald-300 svelte-tc5t5g"> </div></div> <div class="compact-sensor-card bg-gray-800/50 border-gray-700/50 backdrop-blur-sm svelte-tc5t5g"><div class="sensor-label svelte-tc5t5g"></div> <div class="sensor-value text-emerald-300 svelte-tc5t5g"> </div></div>',1),Jt=O('<div class="compact-sensor-card bg-gray-800/50 border-gray-700/50 backdrop-blur-sm svelte-tc5t5g"><div class="sensor-label svelte-tc5t5g"> </div> <div class="sensor-value text-blue-300 svelte-tc5t5g"> </div></div>'),Xt=O('<div class="flag-indicator-row svelte-tc5t5g"><div><div class="status-ring svelte-tc5t5g"></div> <div class="status-core svelte-tc5t5g"></div></div> <div class="flag-info svelte-tc5t5g"><div class="flag-name svelte-tc5t5g"> </div> <div> </div></div></div>'),te=O('<div class="flag-indicator-row svelte-tc5t5g"><div><div class="status-ring svelte-tc5t5g"></div> <div class="status-core svelte-tc5t5g"></div></div> <div class="flag-info svelte-tc5t5g"><div class="flag-name svelte-tc5t5g"> </div> <div> </div></div></div>'),ee=O('<div class="compact-flag-row svelte-tc5t5g"><div></div> <div class="compact-flag-name svelte-tc5t5g"> </div> <div> </div></div>'),se=O('<div><div class="mppt-header svelte-tc5t5g"><span class="mppt-name svelte-tc5t5g"> </span> <div> </div></div> <div class="temp-readings svelte-tc5t5g"><div class="temp-item svelte-tc5t5g"><span class="temp-label svelte-tc5t5g">MOSFET</span> <span class="temp-value svelte-tc5t5g"> </span></div> <div class="temp-item svelte-tc5t5g"><span class="temp-label svelte-tc5t5g">MPPT</span> <span class="temp-value svelte-tc5t5g"> </span></div></div> <div class="mppt-flags svelte-tc5t5g"><div class="flags-header svelte-tc5t5g">System Status</div> <div class="modern-flags-compact svelte-tc5t5g"></div></div></div>'),ae=O('<div class="dashboard-container svelte-tc5t5g"><div class="sensor-grid svelte-tc5t5g"><div class="category-panel bg-cyan-500/10 border-cyan-500/30 svelte-tc5t5g"><div class="category-header svelte-tc5t5g"><span class="category-icon svelte-tc5t5g">üå¨Ô∏è</span> <span class="category-title text-cyan-400 svelte-tc5t5g">CABIN AIR QUALITY</span></div> <div class="sensors-compact-grid svelte-tc5t5g"></div></div> <div class="category-panel bg-yellow-500/5 border-yellow-500/20 svelte-tc5t5g"><div class="category-header svelte-tc5t5g"><span class="category-icon svelte-tc5t5g">üîå</span> <span class="category-title text-yellow-400 svelte-tc5t5g">BATTERY CONTACTORS</span> <div> </div></div> <div class="modern-flags-container svelte-tc5t5g"></div></div> <div class="category-panel bg-green-500/5 border-green-500/20 svelte-tc5t5g"><div class="category-header svelte-tc5t5g"><span class="category-icon svelte-tc5t5g">üîã</span> <span class="category-title text-green-400 svelte-tc5t5g">BATTERY MANAGEMENT</span> <div> </div></div> <div class="modern-flags-container svelte-tc5t5g"></div></div> <div class="category-panel bg-emerald-500/5 border-emerald-500/20 svelte-tc5t5g"><div class="category-header svelte-tc5t5g"><span class="category-icon svelte-tc5t5g">üå°Ô∏è</span> <span class="category-title text-emerald-400 svelte-tc5t5g">CMU TEMPERATURES</span></div> <div class="sensors-compact-grid svelte-tc5t5g"></div></div> <div class="category-panel bg-blue-500/5 border-blue-500/20 lg:col-span-2 svelte-tc5t5g"><div class="category-header svelte-tc5t5g"><span class="category-icon svelte-tc5t5g">‚ö°</span> <span class="category-title text-blue-400 svelte-tc5t5g">MOTOR SYSTEM & ERRORS</span> <div> </div></div> <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6 svelte-tc5t5g"><div class="svelte-tc5t5g"><h4 class="section-subtitle svelte-tc5t5g">Temperatures</h4> <div class="sensors-compact-grid svelte-tc5t5g"></div></div> <div class="svelte-tc5t5g"><h4 class="section-subtitle svelte-tc5t5g">System Limits</h4> <div class="modern-flags-container svelte-tc5t5g"></div></div></div> <div class="svelte-tc5t5g"><h4 class="section-subtitle svelte-tc5t5g">Motor Errors</h4> <div class="modern-flags-container svelte-tc5t5g"></div></div></div>  <div class="category-panel bg-orange-500/5 border-orange-500/20 lg:col-span-2 svelte-tc5t5g"><div class="category-header svelte-tc5t5g"><span class="category-icon svelte-tc5t5g">‚òÄÔ∏è</span> <span class="category-title text-orange-400 svelte-tc5t5g">SOLAR MPPT CONTROLLERS</span></div> <div class="mppt-grid svelte-tc5t5g"></div></div></div></div>');function oe(ht,Mt){Dt(Mt,!1);const[Tt,St]=Wt(),d=()=>Gt(Vt,"$globalStore",Tt),R=k(),$=k(),N=k(),B=k(),F=k(),wt=k(),kt=k(),Et=["A","B","C","D"],At=["Motor_Temp","HeatSink_Temp","DSP_Board_Temp"];function E(v,r="",l=1){return`${v.toFixed(l)}${r}`}function T(v){const r=Object.values(v).filter(Boolean);return r.length>2?"error":r.length>0?"warning":"ok"}function Rt(v){switch(v){case"ok":return"text-green-400";case"warning":return"text-orange-400";case"error":return"text-red-400";default:return"text-gray-400"}}function vt(v){switch(v){case"ok":return"bg-green-500/10 border-green-500/30";case"warning":return"bg-orange-500/10 border-orange-500/50";case"error":return"bg-red-500/10 border-red-500/70";default:return"bg-gray-500/10 border-gray-500/30"}}function $t(v,r){const l={CO:{warning:10,error:25},CH4:{warning:100,error:500},NH3:{warning:25,error:50},NO2:{warning:3,error:10},O2:{warning:16,error:14},CO2:{warning:1e3,error:5e3}},c=r.replace("Cabin_","").replace("_Content",""),i=l[c];return i?c==="O2"?v<=i.error?"error":v<=i.warning?"warning":"ok":v>=i.error?"error":v>=i.warning?"warning":"ok":"ok"}function L(v){return v.replace(/_/g," ").replace(/\b\w/g,r=>r.toUpperCase()).replace(/Cmu/g,"CMU").replace(/Bms/g,"BMS").replace(/Soc/g,"SOC").replace(/Can/g,"CAN").replace(/Ipm/g,"IPM").replace(/Pwm/g,"PWM").replace(/Dsp/g,"DSP").replace(/Hw/g,"HW").replace(/Uvlo/g,"UVLO")}S(()=>d(),()=>{w(R,T(d().metric.contactor_flags))}),S(()=>d(),()=>{w($,T(d().metric.bmsFlags))}),S(()=>d(),()=>{w(N,T(d().metric.MotorLimits))}),S(()=>d(),()=>{w(B,T(d().metric.MotorErrors))}),S(()=>d(),()=>{w(F,T({...d().metric.MotorLimits,...d().metric.MotorErrors}))}),S(()=>(a(R),a($),a(N),a(B),d()),()=>{w(wt,(()=>{const v=[a(R),a($),a(N),a(B),...d().metric.mppts.map(r=>T(r.flags))];return v.includes("error")?"error":v.includes("warning")?"warning":"ok"})())}),S(()=>d(),()=>{w(kt,[...Object.values(d().metric.contactor_flags),...Object.values(d().metric.bmsFlags),...Object.values(d().metric.MotorLimits),...Object.values(d().metric.MotorErrors),...d().metric.mppts.flatMap(v=>Object.values(v.flags))].filter(Boolean).length)}),Ht(),It();var I=ae(),it=e(I),D=e(it),ct=s(e(D),2);h(ct,5,()=>Object.entries(d().metric.CabinSensors),M,(v,r)=>{let l=()=>a(r)[0],c=()=>a(r)[1];var i=qt();const o=x(()=>l().includes("_Content")?$t(c(),l()):"ok");var g=e(i),n=e(g,!0);t(g);var u=s(g,2),_=e(u,!0);t(u),t(i),C((f,b,A,P)=>{m(i,1,`compact-sensor-card ${f??""}`,"svelte-tc5t5g"),p(n,b),m(u,1,`sensor-value ${A??""}`,"svelte-tc5t5g"),p(_,P)},[()=>vt(a(o)),()=>l().replace("Cabin_","").replace("_"," "),()=>Rt(a(o)),()=>E(c(),l().includes("Temperature")?"¬∞C":l().includes("Pressure")?"kPa":l().includes("O2")?"%":"ppm")],x),y(v,i)}),t(ct),t(D);var H=s(D,2),Y=e(H),K=s(e(Y),4),Lt=e(K,!0);t(K),t(Y);var lt=s(Y,2);h(lt,5,()=>Object.entries(d().metric.contactor_flags),M,(v,r)=>{let l=()=>a(r)[0],c=()=>a(r)[1];var i=Qt(),o=e(i),g=s(o,2),n=e(g),u=e(n,!0);t(n);var _=s(n,2),f=e(_,!0);t(_),t(g),t(i),C(b=>{m(o,1,`flag-status-light ${c()?"active":"inactive"}`,"svelte-tc5t5g"),p(u,b),m(_,1,`flag-status-text ${c()?"text-red-300":"text-green-400"}`,"svelte-tc5t5g"),p(f,c()?"ACTIVE":"NORMAL")},[()=>L(l())],x),y(v,i)}),t(lt),t(H);var V=s(H,2),W=e(V),G=s(e(W),4),Pt=e(G,!0);t(G),t(W);var dt=s(W,2);h(dt,5,()=>Object.entries(d().metric.bmsFlags),M,(v,r)=>{let l=()=>a(r)[0],c=()=>a(r)[1];var i=Zt(),o=e(i),g=s(o,2),n=e(g),u=e(n,!0);t(n);var _=s(n,2),f=e(_,!0);t(_),t(g),t(i),C(b=>{m(o,1,`flag-status-light ${c()?"active":"inactive"}`,"svelte-tc5t5g"),p(u,b),m(_,1,`flag-status-text ${c()?"text-red-300":"text-green-400"}`,"svelte-tc5t5g"),p(f,c()?"FAULT":"OK")},[()=>L(l())],x),y(v,i)}),t(dt),t(V);var q=s(V,2),ot=s(e(q),2);h(ot,5,()=>d().metric.cmus,M,(v,r,l)=>{var c=zt(),i=Kt(c),o=e(i);o.textContent=`CMU${l+1} Temp`;var g=s(o,2),n=e(g,!0);t(g),t(i);var u=s(i,2),_=e(u);_.textContent=`Cell${l+1} Temp`;var f=s(_,2),b=e(f,!0);t(f),t(u),C((A,P)=>{p(n,A),p(b,P)},[()=>E(a(r).temperature,"¬∞C"),()=>E(a(r).cell_temperature,"¬∞C")],x),y(v,c)}),t(ot),t(q);var Q=s(q,2),Z=e(Q),z=s(e(Z),4),Ut=e(z,!0);t(z),t(Z);var J=s(Z,2),X=e(J),gt=s(e(X),2);h(gt,5,()=>At,M,(v,r)=>{var l=Jt(),c=e(l),i=e(c,!0);t(c);var o=s(c,2),g=e(o,!0);t(o),t(l),C((n,u)=>{p(i,n),p(g,u)},[()=>a(r).replace("_"," "),()=>E(d().metric[a(r)],"¬∞C")],x),y(v,l)}),t(gt),t(X);var nt=s(X,2),pt=s(e(nt),2);h(pt,5,()=>Object.entries(d().metric.MotorLimits),M,(v,r)=>{let l=()=>a(r)[0],c=()=>a(r)[1];var i=Xt(),o=e(i),g=s(o,2),n=e(g),u=e(n,!0);t(n);var _=s(n,2),f=e(_,!0);t(_),t(g),t(i),C(b=>{m(o,1,`flag-status-light ${c()?"active":"inactive"}`,"svelte-tc5t5g"),p(u,b),m(_,1,`flag-status-text ${c()?"text-orange-300":"text-green-400"}`,"svelte-tc5t5g"),p(f,c()?"LIMITED":"NORMAL")},[()=>L(l())],x),y(v,i)}),t(pt),t(nt),t(J);var _t=s(J,2),ut=s(e(_t),2);h(ut,5,()=>Object.entries(d().metric.MotorErrors),M,(v,r)=>{let l=()=>a(r)[0],c=()=>a(r)[1];var i=te(),o=e(i),g=s(o,2),n=e(g),u=e(n,!0);t(n);var _=s(n,2),f=e(_,!0);t(_),t(g),t(i),C(b=>{m(o,1,`flag-status-light ${c()?"active error":"inactive"}`,"svelte-tc5t5g"),p(u,b),m(_,1,`flag-status-text ${c()?"text-red-300":"text-green-400"}`,"svelte-tc5t5g"),p(f,c()?"ERROR":"OK")},[()=>L(l())],x),y(v,i)}),t(ut),t(_t),t(Q);var mt=s(Q,2),ft=s(e(mt),2);h(ft,5,()=>d().metric.mppts,M,(v,r,l)=>{var c=se();const i=x(()=>T(a(r).flags));var o=e(c),g=e(o),n=e(g,!0);t(g);var u=s(g,2),_=e(u,!0);t(u),t(o);var f=s(o,2),b=e(f),A=s(e(b),2),P=e(A,!0);t(A),t(b);var bt=s(b,2),xt=s(e(bt),2),jt=e(xt,!0);t(xt),t(bt),t(f);var yt=s(f,2),Ct=s(e(yt),2);h(Ct,5,()=>Object.entries(a(r).flags),M,(tt,j)=>{let et=()=>a(j)[0],U=()=>a(j)[1];var st=ee(),Ot=e(st),at=s(Ot,2),Nt=e(at,!0);t(at);var rt=s(at,2),Bt=e(rt,!0);t(rt),t(st),C(Ft=>{m(Ot,1,`flag-status-dot ${U()?"active":"inactive"}`,"svelte-tc5t5g"),p(Nt,Ft),m(rt,1,`compact-flag-status ${U()?"text-red-300":"text-green-400"}`,"svelte-tc5t5g"),p(Bt,U()?"‚ö†":"‚úì")},[()=>L(et())],x),y(tt,st)}),t(Ct),t(yt),t(c),C((tt,j,et,U)=>{m(c,1,`mppt-card ${tt??""} backdrop-blur-sm`,"svelte-tc5t5g"),p(n,Et[l]),m(u,1,`status-pill ${a(i)??""}`,"svelte-tc5t5g"),p(_,j),p(P,et),p(jt,U)},[()=>vt(a(i)),()=>a(i).toUpperCase(),()=>E(a(r).Mosfet_Temperature,"¬∞C"),()=>E(a(r).MPPT_Temperature,"¬∞C")],x),y(v,c)}),t(ft),t(mt),t(it),t(I),C((v,r,l)=>{m(K,1,`status-pill ${a(R)??""}`,"svelte-tc5t5g"),p(Lt,v),m(G,1,`status-pill ${a($)??""}`,"svelte-tc5t5g"),p(Pt,r),m(z,1,`status-pill ${a(F)??""}`,"svelte-tc5t5g"),p(Ut,l)},[()=>a(R).toUpperCase(),()=>a($).toUpperCase(),()=>a(F).toUpperCase()],x),y(ht,I),Yt(),St()}export{oe as component};
