import{f as h,a as g,s as l}from"../chunks/CwDV2ZAI.js";import{o as Ge}from"../chunks/oPJpDEAD.js";import{W as Je,X as Ke,Y as b,Z as Qe,_ as s,$ as t,o as v,a0 as e,a1 as m,a2 as fe}from"../chunks/ZqAPZRbL.js";import{e as U,i as F}from"../chunks/C7JNzSMk.js";import{g as et,s as I}from"../chunks/DqRx0sPc.js";import{s as je}from"../chunks/CFu27dXM.js";import{b as ge}from"../chunks/BD9az56a.js";import{s as tt,a as st}from"../chunks/Dmjw4m20.js";import{C as N,a as at,L as rt,P as it,b as vt,c as lt,p as ct,d as pt,e as ot}from"../chunks/BU_mMZHm.js";var dt=h("<div></div>"),nt=h('<div><div class="flag-dot svelte-1jzmyzp"></div> <span class="flag-text svelte-1jzmyzp"> </span></div>'),mt=h('<div><div class="mppt-header svelte-1jzmyzp"><div class="mppt-title-section svelte-1jzmyzp"><h3 class="mppt-name svelte-1jzmyzp"> </h3> <div class="power-display svelte-1jzmyzp"><span class="power-value text-yellow-400 svelte-1jzmyzp"> </span> <span class="power-unit svelte-1jzmyzp">W</span></div></div> <div class="temperature-section svelte-1jzmyzp"><div class="temp-item svelte-1jzmyzp"><span class="temp-label svelte-1jzmyzp">MOSFET</span> <span class="temp-value text-orange-400 svelte-1jzmyzp"> </span></div> <div class="temp-item svelte-1jzmyzp"><span class="temp-label svelte-1jzmyzp">MPPT</span> <span class="temp-value text-red-400 svelte-1jzmyzp"> </span></div></div> <div class="efficiency-circle circle-ok svelte-1jzmyzp"><span class="efficiency-text svelte-1jzmyzp"> </span></div></div> <div class="mppt-flags svelte-1jzmyzp"></div> <div class="metrics-grid svelte-1jzmyzp"><div class="metric-column svelte-1jzmyzp"><div class="column-label svelte-1jzmyzp">INPUT</div> <div class="metric-row svelte-1jzmyzp"><span class="metric-icon svelte-1jzmyzp">‚ö°</span> <div class="metric-data svelte-1jzmyzp"><span class="metric-value text-blue-400 svelte-1jzmyzp"> </span> <span class="metric-unit svelte-1jzmyzp">V</span></div></div> <div class="metric-row svelte-1jzmyzp"><span class="metric-icon svelte-1jzmyzp">üîå</span> <div class="metric-data svelte-1jzmyzp"><span class="metric-value text-cyan-400 svelte-1jzmyzp"> </span> <span class="metric-unit svelte-1jzmyzp">A</span></div></div></div> <div class="metric-column svelte-1jzmyzp"><div class="column-label svelte-1jzmyzp">OUTPUT</div> <div class="metric-row svelte-1jzmyzp"><span class="metric-icon svelte-1jzmyzp">‚ö°</span> <div class="metric-data svelte-1jzmyzp"><span class="metric-value text-green-400 svelte-1jzmyzp"> </span> <span class="metric-unit svelte-1jzmyzp">V</span></div></div> <div class="metric-row svelte-1jzmyzp"><span class="metric-icon svelte-1jzmyzp">üîå</span> <div class="metric-data svelte-1jzmyzp"><span class="metric-value text-emerald-400 svelte-1jzmyzp"> </span> <span class="metric-unit svelte-1jzmyzp">A</span></div></div></div></div></div>'),zt=h('<div class="dashboard-container svelte-1jzmyzp"><div class="mppt-overview-section svelte-1jzmyzp"><div class="system-summary-card svelte-1jzmyzp"><div class="summary-header svelte-1jzmyzp"><h2 class="summary-title svelte-1jzmyzp">‚òÄÔ∏è Solar Array Status</h2> <div class="status-indicators svelte-1jzmyzp"></div></div> <div class="summary-stats svelte-1jzmyzp"><div class="stat-item svelte-1jzmyzp"><div class="stat-value text-yellow-400 svelte-1jzmyzp"> </div> <div class="stat-label svelte-1jzmyzp">Total Power</div></div> <div class="stat-item svelte-1jzmyzp"><div class="stat-value text-green-400 svelte-1jzmyzp"> </div> <div class="stat-label svelte-1jzmyzp">Avg Efficiency</div></div> <div class="stat-item svelte-1jzmyzp"><div class="stat-value text-blue-400 svelte-1jzmyzp">N/A</div> <div class="stat-label svelte-1jzmyzp">Active Units</div></div></div></div> <div class="mppt-grid svelte-1jzmyzp"></div></div> <div class="charts-section svelte-1jzmyzp"><div class="chart-container svelte-1jzmyzp"><canvas class="chart-canvas svelte-1jzmyzp"></canvas></div> <div class="chart-container svelte-1jzmyzp"><canvas class="chart-canvas svelte-1jzmyzp"></canvas></div></div></div>');function xt(be,he){Je(he,!0);const[we,xe]=tt(),i=()=>st(et,"$globalStore",we);N.register(at,rt,it,vt,lt,ct,pt,ot);let u,y,p,o;const Pe=["A","B","C","D"],Te=[{key:"hw_overvolt",label:"HW OV"},{key:"hw_overcurrent",label:"HW OC"},{key:"under12v",label:"12V UV"},{key:"low_array_power",label:"LAP"},{key:"battery_full",label:"Batt Full"},{key:"battery_low",label:"Batt Low"},{key:"mosfet_overheat",label:"MOSFET"}],H=["#3b82f6","#10b981","#f59e0b","#ef4444"];function c(a,r="",d=1){return typeof a!="number"?"N/A":`${a.toFixed(d)}${r}`}function ke(a){switch(a){case"ok":return"border-green-500/30";case"warning":return"border-yellow-500/50";case"error":return"border-red-500/70";default:return"border-gray-500/30"}}function Ce(a){switch(a){case"ok":return"bg-green-500/5";case"warning":return"bg-yellow-500/5";case"error":return"bg-red-500/5";default:return"bg-gray-500/5"}}function Z(a,r,d){return{type:"line",data:{labels:i().historic.Timestamps,datasets:[{label:a,data:i().historic[d],borderColor:"#3b82f6",backgroundColor:"#3b82f620",borderWidth:2,fill:!1,tension:.1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!1,title:{display:!0,text:r,color:"#fff"},ticks:{color:"#fff"},grid:{color:"#374151"}},x:{title:{display:!0,text:"Time",color:"#fff"},ticks:{color:"#fff"},grid:{color:"#374151"}}},plugins:{legend:{labels:{color:"#fff"}},title:{display:!0,text:a,color:"#fff"}}}}}function $e(){i().historic.Timestamps.length!==0&&(p&&(p.data.labels=i().historic.Timestamps,p.data.datasets[0].data=i().historic.solar_input_voltage,p.update("none")),o&&(o.data.labels=i().historic.Timestamps,o.data.datasets[0].data=i().historic.solar_output_power,o.update("none")))}Ke(()=>{i().historic.Timestamps.length>0&&$e()});const Se=fe(()=>i().metric.mppts.reduce((a,r)=>a+r.Output_Power,0)),Ae=fe(()=>i().metric.mppts.reduce((a,r)=>a+r.efficiency,0)/i().metric.mppts.length);Ge(()=>(u&&(p=new N(u,Z("MPPT Input Voltage vs Time","Input Voltage (V)","solar_input_voltage"))),y&&(o=new N(y,Z("MPPT Output Power vs Time","Output Power (W)","solar_output_power"))),()=>{p==null||p.destroy(),o==null||o.destroy()}));var w=zt(),x=t(w),P=t(x),T=t(P),D=s(t(T),2);U(D,5,()=>i().metric.mppts,F,(a,r,d)=>{var n=dt();I(n,1,"status-dot dot-ok svelte-1jzmyzp"),b(()=>je(n,`background-color: ${H[d]??""}`)),g(a,n)}),e(D),e(T);var R=s(T,2),k=t(R),X=t(k),Oe=t(X,!0);e(X),m(2),e(k);var Y=s(k,2),q=t(Y),Ve=t(q,!0);e(q),m(2),e(Y),m(2),e(R),e(P);var G=s(P,2);U(G,5,()=>i().metric.mppts,F,(a,r,d)=>{var n=mt(),$=t(n),S=t($),_=t(S),We=t(_,!0);e(_);var Q=s(_,2),ee=t(Q),Ee=t(ee,!0);e(ee),m(2),e(Q),e(S);var A=s(S,2),O=t(A),te=s(t(O),2),Be=t(te,!0);e(te),e(O);var se=s(O,2),ae=s(t(se),2),Ue=t(ae,!0);e(ae),e(se),e(A);var re=s(A,2),ie=t(re),Fe=t(ie);e(ie),e(re),e($);var V=s($,2);U(V,21,()=>Te,F,(E,f)=>{var z=nt(),j=s(t(z),2),B=t(j,!0);e(j),e(z),b(()=>{I(z,1,`flag-indicator ${v(r).flags[v(f).key]?"flag-active":"flag-inactive"}`,"svelte-1jzmyzp"),l(B,v(f).label)}),g(E,z)}),e(V);var ve=s(V,2),M=t(ve),L=s(t(M),2),le=s(t(L),2),ce=t(le),Ie=t(ce,!0);e(ce),m(2),e(le),e(L);var pe=s(L,2),oe=s(t(pe),2),de=t(oe),Ne=t(de,!0);e(de),m(2),e(oe),e(pe),e(M);var ne=s(M,2),W=s(t(ne),2),me=s(t(W),2),ze=t(me),He=t(ze,!0);e(ze),m(2),e(me),e(W);var ue=s(W,2),ye=s(t(ue),2),_e=t(ye),Ze=t(_e,!0);e(_e),m(2),e(ye),e(ue),e(ne),e(ve),e(n),b((E,f,z,j,B,De,Re,Xe,Ye,qe)=>{I(n,1,`mppt-card-modern ${E??""} ${f??""}`,"svelte-1jzmyzp"),je(_,`color: ${H[d]??""}`),l(We,"MPPT "+Pe[d]),l(Ee,z),l(Be,j),l(Ue,B),l(Fe,`${De??""}%`),l(Ie,Re),l(Ne,Xe),l(He,Ye),l(Ze,qe)},[()=>ke("ok"),()=>Ce("ok"),()=>c(v(r).Output_Power,"",0),()=>c(v(r).Mosfet_Temperature,"¬∞C"),()=>c(v(r).MPPT_Temperature,"¬∞C"),()=>c(v(r).efficiency,"",1),()=>c(v(r).Input_Voltage,""),()=>c(v(r).Input_Current,""),()=>c(v(r).Output_Voltage,""),()=>c(v(r).Output_Current,"")]),g(a,n)}),e(G),e(x);var J=s(x,2),C=t(J),Me=t(C);ge(Me,a=>u=a,()=>u),e(C);var K=s(C,2),Le=t(K);ge(Le,a=>y=a,()=>y),e(K),e(J),e(w),b((a,r)=>{l(Oe,a),l(Ve,r)},[()=>c(v(Se),"W",0),()=>c(v(Ae),"%")]),g(be,w),Qe(),xe()}export{xt as component};
