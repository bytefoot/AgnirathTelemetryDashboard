import{f as _e,a as ye,s as g}from"../chunks/CwDV2ZAI.js";import{o as xe}from"../chunks/oPJpDEAD.js";import{W as Se,X as Ce,Y as je,Z as we,_ as i,$ as t,o as h,a0 as a,a1 as k,a2 as U}from"../chunks/ZqAPZRbL.js";import{s as V,c as ke,g as Ae}from"../chunks/DqRx0sPc.js";import{b as f}from"../chunks/BD9az56a.js";import{s as Te,a as $e}from"../chunks/Dmjw4m20.js";import{C as n,a as Le,L as Pe,P as We,b as Be,c as Me,p as Ee,d as Ie,e as Re}from"../chunks/BU_mMZHm.js";var Ze=_e('<div class="space-y-6 p-6"><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8"><div><div class="flex items-center justify-between mb-2"><h3 class="text-lg font-semibold">Speed Status</h3> <div></div></div> <div class="grid grid-cols-2 gap-4"><div><div class="metric-value text-blue-400 svelte-14ry3bj"> </div> <div class="metric-label svelte-14ry3bj">Current Speed</div></div> <div><div class="metric-value text-gray-400 svelte-14ry3bj"> </div> <div class="metric-label svelte-14ry3bj">Predicted Speed</div></div></div> <div class="mt-2 text-sm"><span class="text-gray-400">Margin:</span> <span> </span></div></div> <div class="metric-card svelte-14ry3bj"><div class="metric-value text-purple-400 svelte-14ry3bj"> </div> <div class="metric-label svelte-14ry3bj">Current Acceleration</div></div> <div class="metric-card svelte-14ry3bj"><div class="metric-value text-green-400 svelte-14ry3bj"> </div> <div class="metric-label svelte-14ry3bj">Battery Level</div></div></div> <div class="grid grid-cols-1 xl:grid-cols-2 gap-6"><div class="plot-container xl:col-span-2 svelte-14ry3bj"><canvas class="w-full h-80"></canvas></div> <div class="plot-container svelte-14ry3bj"><canvas class="w-full h-80"></canvas></div> <div class="plot-container svelte-14ry3bj"><canvas class="w-full h-80"></canvas></div> <div class="plot-container svelte-14ry3bj"><canvas class="w-full h-80"></canvas></div> <div class="plot-container svelte-14ry3bj"><canvas class="w-full h-80"></canvas></div> <div class="plot-container xl:col-span-2 svelte-14ry3bj"><canvas class="w-full h-80"></canvas></div></div></div>');function ze(ee,te){Se(te,!0);const[ae,se]=Te(),e=()=>$e(Ae,"$globalStore",ae);n.register(Le,Pe,We,Be,Me,Ee,Ie,Re);let _,y,x,S,C,j,r,l,o,d,c,v;function m(s,b="",p=1){return typeof s!="number"?"N/A":`${s.toFixed(p)} ${b}`}function u(s,b,p,N,O=!1,he){return{type:"line",data:{labels:e().historic.Timestamps,datasets:[{label:s,data:b,borderColor:p,backgroundColor:p+"20",borderWidth:2,fill:!1,tension:.1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:O,max:he,title:{display:!0,text:N,color:"#fff"},ticks:{color:"#fff"},grid:{color:"#374151"}},x:{title:{display:!0,text:"Time",color:"#fff"},ticks:{color:"#fff"},grid:{color:"#374151"}}},plugins:{legend:{labels:{color:"#fff"}},title:{display:!0,text:`${s} vs Time`,color:"#fff"}}}}}function ie(){return{type:"line",data:{labels:e().historic.Timestamps,datasets:[{label:"Speed",data:e().historic.Speed,borderColor:"#3b82f6",backgroundColor:"#3b82f620",borderWidth:2,fill:!1,tension:.1},{label:"Speed 2",data:e().historic.Speed2||[],borderColor:"#ef4444",backgroundColor:"#ef444420",borderWidth:2,fill:!1,tension:.1}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,title:{display:!0,text:"Speed (km/h)",color:"#fff"},ticks:{color:"#fff"},grid:{color:"#374151"}},x:{title:{display:!0,text:"Time",color:"#fff"},ticks:{color:"#fff"},grid:{color:"#374151"}}},plugins:{legend:{labels:{color:"#fff"}},title:{display:!0,text:"Speed & Speed 2 vs Time",color:"#fff"}}}}}function re(){e().historic.Timestamps.length!==0&&(r&&(r.data.labels=e().historic.Timestamps,r.data.datasets[0].data=e().historic.Speed,r.data.datasets[1].data=e().historic.Speed2||[],r.update("none")),l&&(l.data.labels=e().historic.Timestamps,l.data.datasets[0].data=e().historic.Acceleration||[],l.update("none")),o&&(o.data.labels=e().historic.Timestamps,o.data.datasets[0].data=e().historic.Altitude||[],o.update("none")),d&&(d.data.labels=e().historic.Timestamps,d.data.datasets[0].data=e().historic.Power,d.update("none")),c&&(c.data.labels=e().historic.Timestamps,c.data.datasets[0].data=e().historic.Solar,c.update("none")),v&&(v.data.labels=e().historic.Timestamps,v.data.datasets[0].data=e().historic.Battery,v.update("none")))}Ce(()=>{e().historic.Timestamps.length>0&&re()}),xe(()=>(_&&(r=new n(_,ie())),y&&(l=new n(y,u("Acceleration",e().historic.Acceleration||[],"#8b5cf6","Acceleration (m/s²)"))),x&&(o=new n(x,u("Altitude",e().historic.Altitude||[],"#06b6d4","Altitude (m)"))),S&&(d=new n(S,u("Power Consumption",e().historic.Power,"#f59e0b","Power (W)",!0))),C&&(c=new n(C,u("Solar Input",e().historic.Solar,"#eab308","Solar Input (W)",!0))),j&&(v=new n(j,u("Battery Level",e().historic.Battery,"#10b981","Battery Level (%)",!0,100))),()=>{r==null||r.destroy(),l==null||l.destroy(),o==null||o.destroy(),d==null||d.destroy(),c==null||c.destroy(),v==null||v.destroy()}));const X=U(()=>Math.abs(e().metric.Speed-e().metric.predicted)),A=U(()=>h(X)>3?"error":"ok");var T=Ze(),$=t(T),w=t($),L=t(w),le=i(t(L),2);a(L);var P=i(L,2),W=t(P),Y=t(W),oe=t(Y,!0);a(Y),k(2),a(W);var q=i(W,2),z=t(q),de=t(z,!0);a(z),k(2),a(q),a(P);var D=i(P,2),B=i(t(D),2),ce=t(B,!0);a(B),a(D),a(w);var M=i(w,2),G=t(M),ve=t(G,!0);a(G),k(2),a(M);var H=i(M,2),J=t(H),ne=t(J,!0);a(J),k(2),a(H),a($);var K=i($,2),E=t(K),pe=t(E);f(pe,s=>_=s,()=>_),a(E);var I=i(E,2),fe=t(I);f(fe,s=>y=s,()=>y),a(I);var R=i(I,2),me=t(R);f(me,s=>x=s,()=>x),a(R);var Z=i(R,2),ue=t(Z);f(ue,s=>S=s,()=>S),a(Z);var F=i(Z,2),be=t(F);f(be,s=>C=s,()=>C),a(F);var Q=i(F,2),ge=t(Q);f(ge,s=>j=s,()=>j),a(Q),a(K),a(T),je((s,b,p,N,O)=>{V(w,1,`metric-card col-span-1 md:col-span-2 ${h(A)==="ok"?"status-ok":"status-error"} border-2`,"svelte-14ry3bj"),V(le,1,`w-4 h-4 rounded-full ${h(A)==="ok"?"bg-green-500":"bg-red-500"}`),g(oe,s),g(de,b),V(B,1,ke(h(A)==="ok"?"text-green-400":"text-red-400")),g(ce,p),g(ve,N),g(ne,O)},[()=>m(e().metric.Speed,"km/h"),()=>m(e().metric.predicted,"km/h"),()=>m(h(X),"km/h"),()=>m(e().historic.Acceleration[-1]||0,"m/s²"),()=>m(e().metric.SOC_Ah,"%",0)]),ye(ee,T),we(),se()}export{ze as component};
